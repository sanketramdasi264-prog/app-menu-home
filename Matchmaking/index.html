<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>‡§Ö‡§ö‡•Ç‡§ï ‡§ó‡•Å‡§£ ‡§Æ‡§ø‡§≤‡§æ‡§®</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--primary:#d84315;--primary-dark:#6d1b00;--accent:#ff6f00;--bg1:#3e1a1a;--bg2:#5d2424;--success:#66bb6a;--warning:#ffa726;--danger:#ef5350;}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Noto Sans Devanagari',sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));min-height:100vh;padding:15px;}
.container{max-width:800px;margin:0 auto;background:rgba(255,255,255,.98);padding:20px;border-radius:20px;box-shadow:0 15px 35px rgba(0,0,0,.3);border:3px solid #ffd700}
h1{text-align:center;color:var(--primary);margin-bottom:20px;border-bottom:2px solid #eee;padding-bottom:10px}
.input-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:25px}
.input-group{background:#fff3e0;padding:15px;border-radius:12px;border:1px solid #ffe0b2}
h3{color:var(--primary-dark);margin-bottom:12px;display:flex;align-items:center;gap:8px}
label{display:block;margin-bottom:5px;font-weight:600;color:#555;}
select{width:100%;padding:10px;border-radius:8px;border:2px solid #ffcc80;font-family:inherit;font-size:1rem;background:#fff}
.btn-calculate{width:100%;padding:15px;background:linear-gradient(to right,var(--primary),var(--accent));color:#fff;border:none;border-radius:10px;font-size:1.2rem;font-weight:700;cursor:pointer;margin-bottom:25px;}
.result-card{display:none;background:#fff;border-radius:15px;overflow:hidden;border:1px solid #eee;}
.score-header{background:linear-gradient(45deg,var(--primary),var(--accent));color:#fff;padding:20px;text-align:center}
.score-circle{width:80px;height:80px;background:#fff;color:var(--primary);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.8rem;font-weight:700;margin:0 auto 10px;}
.compatibility-level{font-weight:700;margin-top:10px;padding:5px 15px;border-radius:20px;background:rgba(255,255,255,.2);display:inline-block}
.details-grid{display:grid;grid-template-columns:1fr 1fr;gap:1px;background:#eee}
.detail-item{background:#fff;padding:15px;text-align:center}
.detail-label{font-size:.85rem;color:#777;}
.detail-val{font-weight:600;color:#333}
.dosha-box{background:#fff5f5;padding:15px;text-align:center;border-top:1px solid #fee2e2}
.excellent{color:var(--success)}.good{color:#43a047}.average{color:var(--warning)}.poor{color:var(--danger)}
@media(max-width:600px){.input-grid{grid-template-columns:1fr}}
</style>
</head>
<body>

<div class="container">
    <h1>‡•ê ‡§ó‡•Å‡§£ ‡§Æ‡§ø‡§≤‡§æ‡§® ‡•ê</h1>
    
    <div class="input-grid">
        <div class="input-group">
            <h3>‚ôÇ ‡§Æ‡•Å‡§≤‡§ó‡§æ</h3>
            <label>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</label>
            <select id="boyNakshatraSelect"></select>
            <label style="margin-top:10px">‡§ö‡§∞‡§£</label>
            <select id="boyCharanSelect">
                <option value="1">‡•ß</option><option value="2">‡•®</option>
                <option value="3">‡•©</option><option value="4">‡•™</option>
            </select>
        </div>

        <div class="input-group">
            <h3>‚ôÄ ‡§Æ‡•Å‡§≤‡§ó‡•Ä</h3>
            <label>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</label>
            <select id="girlNakshatraSelect"></select>
            <label style="margin-top:10px">‡§ö‡§∞‡§£</label>
            <select id="girlCharanSelect">
                <option value="1">‡•ß</option><option value="2">‡•®</option>
                <option value="3">‡•©</option><option value="4">‡•™</option>
            </select>
        </div>
    </div>

    <button class="btn-calculate" onclick="calculate()">‡§ó‡•Å‡§£ ‡§§‡§™‡§æ‡§∏‡§æ</button>

    <div id="resultCard" class="result-card">
        <div class="score-header">
            <div class="score-circle" id="scoreNum">0</div>
            <div>‡§è‡§ï‡•Ç‡§£ ‡§ó‡•Å‡§£ (‡•©‡•¨ ‡§™‡•à‡§ï‡•Ä)</div>
            <div id="compatLevel" class="compatibility-level"></div>
        </div>
        <div class="details-grid">
            <div class="detail-item"><div class="detail-label">‡§Æ‡•Å‡§≤‡§æ‡§ö‡•á ‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</div><div class="detail-val"><span id="boyNakshatra"></span> (<span id="boyCharan"></span>)</div></div>
            <div class="detail-item"><div class="detail-label">‡§Æ‡•Å‡§≤‡•Ä‡§ö‡•á ‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</div><div class="detail-val"><span id="girlNakshatra"></span> (<span id="girlCharan"></span>)</div></div>
            <div class="detail-item"><div class="detail-label">‡§Æ‡•Å‡§≤‡§æ‡§ö‡•Ä ‡§∞‡§æ‡§∏</div><div class="detail-val" id="boyRashiDetail"></div></div>
            <div class="detail-item"><div class="detail-label">‡§Æ‡•Å‡§≤‡•Ä‡§ö‡•Ä ‡§∞‡§æ‡§∏</div><div class="detail-val" id="girlRashiDetail"></div></div>
        </div>
        <div class="dosha-box">
            <div id="doshaText">-</div>
        </div>
    </div>
</div>

<script>
let nakshatraData = {};
let gunData = {};

// Ensure these file names match your actual files on GitHub/Server
const NAKSHATRA_FILE = 'nakshatra_details.json'; 
const GUNMILAN_FILE = 'gunmilan_data (5).json';

async function init() {
    try {
        const [nRes, gRes] = await Promise.all([
            fetch(NAKSHATRA_FILE),
            fetch(GUNMILAN_FILE)
        ]);
        nakshatraData = await nRes.json();
        gunData = await gRes.json();
        
        const bSel = document.getElementById('boyNakshatraSelect');
        const gSel = document.getElementById('girlNakshatraSelect');
        Object.keys(nakshatraData).forEach(n => {
            bSel.add(new Option(n, n));
            gSel.add(new Option(n, n));
        });
    } catch (e) {
        alert("‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§Ö‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§æ‡§à‡§≤‡§ö‡•Ä ‡§®‡§æ‡§µ‡•á ‡§§‡§™‡§æ‡§∏‡§æ.");
    }
}

function getRashi(nak, charan) {
    const d = nakshatraData[nak];
    if (!d || !d.‡§∞‡§æ‡§∂‡•Ä_‡§ö‡§∞‡§£) return "-";
    for (let r in d.‡§∞‡§æ‡§∂‡•Ä_‡§ö‡§∞‡§£) {
        if (d.‡§∞‡§æ‡§∂‡•Ä_‡§ö‡§∞‡§£[r].includes(parseInt(charan))) return r;
    }
    return "-";
}

function calculate() {
    const bN = document.getElementById('boyNakshatraSelect').value;
    const bC = document.getElementById('boyCharanSelect').value;
    const gN = document.getElementById('girlNakshatraSelect').value;
    const gC = document.getElementById('girlCharanSelect').value;

    document.getElementById('boyNakshatra').textContent = bN;
    document.getElementById('boyCharan').textContent = bC;
    document.getElementById('girlNakshatra').textContent = gN;
    document.getElementById('girlCharan').textContent = gC;
    document.getElementById('boyRashiDetail').textContent = getRashi(bN, bC);
    document.getElementById('girlRashiDetail').textContent = getRashi(gN, gC);

    let match = null;

    // --- JSON 5 SEARCH LOGIC ---
    for (let key in gunData) {
        let parts = key.split('_'); // [ "‡§Ö‡§∂‡•ç‡§µ‡§ø‡§®‡•Ä-1,2,3,4", "‡§≠‡§∞‡§£‡•Ä-1,2,3,4" ]
        let bPart = parts[0].split('-'); // [ "‡§Ö‡§∂‡•ç‡§µ‡§ø‡§®‡•Ä", "1,2,3,4" ]
        let gPart = parts[1].split('-'); // [ "‡§≠‡§∞‡§£‡•Ä", "1,2,3,4" ]

        // Check Boy: Name matches AND charan is in range
        let bMatch = (bPart[0] === bN && bPart[1].split(',').includes(bC));
        // Check Girl: Name matches AND charan is in range
        let gMatch = (gPart[0] === gN && gPart[1].split(',').includes(gC));

        if (bMatch && gMatch) {
            match = gunData[key];
            break;
        }
    }

    if (match) {
        document.getElementById('scoreNum').textContent = match.score;
        document.getElementById('doshaText').textContent = match.dosha || "‡§¶‡•ã‡§∑ ‡§®‡§æ‡§π‡•Ä";
        
        let lvl = "‡§∏‡§∞‡§æ‡§∏‡§∞‡•Ä", cls = "average";
        if (match.score >= 25) { lvl = "‡§â‡§§‡•ç‡§§‡§Æ ‡§ú‡•ã‡§°‡•Ä ‚ú®"; cls = "excellent"; }
        else if (match.score >= 18) { lvl = "‡§ö‡§æ‡§Ç‡§ó‡§≤‡•Ä ‡§ú‡•ã‡§°‡•Ä üëç"; cls = "good"; }
        else { lvl = "‡§ú‡•ã‡§°‡•Ä ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§®‡§æ‡§π‡•Ä ‚ùå"; cls = "poor"; }

        document.getElementById('compatLevel').textContent = lvl;
        document.getElementById('compatLevel').className = "compatibility-level " + cls;
        document.getElementById('resultCard').style.display = 'block';
    } else {
        alert("‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä.");
    }
}
init();
</script>
</body>
</html>
