<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>अचूक गुण मिलान</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
    font-family:'Noto Sans Devanagari',sans-serif;
    background:linear-gradient(135deg,#fff3e0,#ffe0b2);
    margin:0;
    padding:20px;
}
.container{
    max-width:520px;
    margin:auto;
    background:#fff;
    border-radius:18px;
    padding:20px;
    box-shadow:0 8px 25px rgba(0,0,0,0.15);
}
h2{
    text-align:center;
    color:#bf360c;
    margin-bottom:20px;
}
.section{
    margin-bottom:15px;
}
label{
    font-weight:600;
    display:block;
    margin-bottom:5px;
}
select{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:16px;
}
.inline-info{
    font-size:14px;
    color:#555;
    margin-top:4px;
}
button{
    width:100%;
    background:#bf360c;
    color:#fff;
    border:none;
    padding:14px;
    font-size:17px;
    border-radius:10px;
    cursor:pointer;
    font-weight:bold;
}
button:hover{background:#a83208;}
.result{
    margin-top:20px;
    text-align:center;
}
.score{
    font-size:40px;
    font-weight:bold;
    color:#bf360c;
}
.dosha{
    margin-top:8px;
    font-size:18px;
    color:#c62828;
}
.error{
    color:red;
    font-weight:bold;
}
</style>
</head>
<body>

<div class="container">

<h2>अचूक गुण मिलान</h2>

<!-- Groom -->
<div class="section">
<label>मुलाची रास</label>
<select id="boyRashi" onchange="onRashiChange('boy')"></select>
<div class="inline-info" id="boyRashiLetters"></div>
</div>

<div class="section">
<label>मुलाचे नक्षत्र-चरण</label>
<select id="boyNak"></select>
</div>

<hr>

<!-- Bride -->
<div class="section">
<label>मुलीची रास</label>
<select id="girlRashi" onchange="onRashiChange('girl')"></select>
<div class="inline-info" id="girlRashiLetters"></div>
</div>

<div class="section">
<label>मुलीचे नक्षत्र-चरण</label>
<select id="girlNak"></select>
</div>

<button onclick="calcMatch()">गुण तपासा</button>

<div class="result" id="result"></div>

</div>

<script>

// ---------------- RASHI DATA ----------------

const rashiLetters = {
 "मेष":"चु चे चो ला लि लू ले लो आ",
 "वृषभ":"इ उ ए ओ वा वि वु वे वो",
 "मिथुन":"का कि कु घ ङ छ के को हा",
 "कर्क":"हि हु हे हो डा डि डु डे डो",
 "सिंह":"मा मि मु मे मो टा टि टु टे",
 "कन्या":"टो पा पि पु ष ण ठ पे पो",
 "तुला":"रा रि रु रे रो ता ति तु ते",
 "वृश्चिक":"तो ना नि नु ने नो या यि यु",
 "धनु":"ये यो भा भि भू धा फा ढा भे",
 "मकर":"भो जा जि जु जे जो खा खि खु",
 "कुंभ":"गा गि गु गे गो सा सि सु से",
 "मीन":"सो दा दि दु दे दो चा चि चु"
};

// Rashi → Nakshatra + charan count
const rashiMap = {
 "मेष":[["अश्विनी",4],["भरणी",4],["कृतिका",1]],
 "वृषभ":[["कृतिका",3],["रोहिणी",4],["मृगशिरा",2]],
 "मिथुन":[["मृगशिरा",2],["आर्द्रा",4],["पुनर्वसू",3]],
 "कर्क":[["पुनर्वसू",1],["पुष्य",4],["आश्लेषा",4]],
 "सिंह":[["मघा",4],["पूर्वा फाल्गुनी",4],["उत्तर फाल्गुनी",1]],
 "कन्या":[["उत्तर फाल्गुनी",3],["हस्त",4],["चित्रा",2]],
 "तुला":[["चित्रा",2],["स्वाती",4],["विशाखा",3]],
 "वृश्चिक":[["विशाखा",1],["अनुराधा",4],["ज्येष्ठा",4]],
 "धनु":[["मूळ",4],["पूर्वाषाढा",4],["उत्तराषाढा",1]],
 "मकर":[["उत्तराषाढा",3],["श्रवण",4],["धनिष्ठा",2]],
 "कुंभ":[["धनिष्ठा",2],["शतभिषा",4],["पूर्वा भाद्रपदा",3]],
 "मीन":[["पूर्वा भाद्रपदा",1],["उत्तरा भाद्रपदा",4],["रेवती",4]]
};

// Charan letters for Nakshatras (only needed for display)
const charanLetters = {
 "अश्विनी":["चु","चे","चो","ला"],
 "भरणी":["ली","लू","ले","लो"],
 "कृतिका":["आ","इ","उ","ए"],
 "रोहिणी":["ओ","वा","वि","वु"],
 "मृगशिरा":["वे","वो","का","कि"],
 "आर्द्रा":["कु","घ","ङ","छ"],
 "पुनर्वसू":["के","को","हा","हि"],
 "पुष्य":["हु","हे","हो","डा"],
 "आश्लेषा":["डि","डु","डे","डो"],
 "मघा":["मा","मि","मु","मे"],
 "पूर्वा फाल्गुनी":["मो","टा","टि","टु"],
 "उत्तर फाल्गुनी":["टे","टो","पा","पि"],
 "हस्त":["पु","ष","ण","ठ"],
 "चित्रा":["पे","पो","रा","रि"],
 "स्वाती":["रु","रे","रो","ता"],
 "विशाखा":["ति","तु","ते","तो"],
 "अनुराधा":["ना","नि","नु","ने"],
 "ज्येष्ठा":["नो","या","यि","यु"],
 "मूळ":["ये","यो","भा","भि"],
 "पूर्वाषाढा":["भू","धा","फा","ढा"],
 "उत्तराषाढा":["भे","भो","जा","जि"],
 "श्रवण":["जु","जे","जो","खा"],
 "धनिष्ठा":["खि","खु","खे","खो"],
 "शतभिषा":["गा","गि","गु","गे"],
 "पूर्वा भाद्रपदा":["गो","सा","सि","सु"],
 "उत्तरा भाद्रपदा":["से","सो","दा","दि"],
 "रेवती":["दु","दे","दो","चा"]
};

// ---------------- INIT ----------------

const boyRashi = document.getElementById("boyRashi");
const girlRashi = document.getElementById("girlRashi");

Object.keys(rashiMap).forEach(r=>{
 boyRashi.innerHTML += `<option value="${r}">${r}</option>`;
 girlRashi.innerHTML += `<option value="${r}">${r}</option>`;
});

onRashiChange('boy');
onRashiChange('girl');

// ---------------- FUNCTIONS ----------------

function onRashiChange(type){
 let rashi = document.getElementById(type+"Rashi").value;
 document.getElementById(type+"RashiLetters").innerText =
   "राशी अक्षरे : "+ rashiLetters[rashi];

 loadNak(type);
}

function loadNak(type){
 let rashi = document.getElementById(type+"Rashi").value;
 let sel = document.getElementById(type+"Nak");
 sel.innerHTML = "";

 rashiMap[rashi].forEach(n=>{
   let name=n[0], count=n[1];
   for(let i=1;i<=count;i++){
     let letter = charanLetters[name][i-1];
     sel.innerHTML += 
      `<option value="${name}-${i}">${name}-${i} (${letter})</option>`;
   }
 });
}

// ---------------- LOAD JSON ----------------

let gunData = {};

fetch("./gunmilan_data.json")
.then(r=>r.json())
.then(data=>{ gunData=data; })
.catch(()=>{ console.log("JSON load error"); });

// ---------------- CALCULATE ----------------

function calcMatch(){
 let b = document.getElementById("boyNak").value;
 let g = document.getElementById("girlNak").value;
 let key = b+"_"+g;

 let res = gunData[key];
 let out = document.getElementById("result");

 if(res){
   out.innerHTML = `<div class='score'>${res.score} गुण</div>
                    <div class='dosha'>दोष : ${res.dosha || "दोष नाही"}</div>`;
 }else{
   out.innerHTML = `<div class='error'>डेटा उपलब्ध नाही</div>`;
 }
}

</script>
</body>
</html>
