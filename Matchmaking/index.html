<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>‡§Ö‡§ö‡•Ç‡§ï ‡§ó‡•Å‡§£ ‡§Æ‡§ø‡§≤‡§æ‡§®</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
--primary:#d84315;
--primary-dark:#6d1b00;
--accent:#ff6f00;
--bg1:#3e1a1a;
--bg2:#5d2424;
--success:#66bb6a;
--warning:#ffa726;
--danger:#ef5350;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
font-family:'Noto Sans Devanagari',sans-serif;
background:linear-gradient(135deg,var(--bg1),var(--bg2));
min-height:100vh;
padding:15px;
position:relative;
}
.container{max-width:800px;margin:0 auto;background:rgba(255,255,255,.98);padding:20px;border-radius:20px;box-shadow:0 15px 35px rgba(0,0,0,.3);border:3px solid #ffd700}
h1{text-align:center;color:var(--primary);margin-bottom:20px;font-weight:700;text-transform:uppercase;letter-spacing:1px;border-bottom:2px solid #eee;padding-bottom:10px}
.input-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:25px}
.input-group{background:#fff3e0;padding:15px;border-radius:12px;border:1px solid #ffe0b2}
h3{color:var(--primary-dark);margin-bottom:12px;font-size:1.1rem;display:flex;align-items:center;gap:8px}
label{display:block;margin-bottom:5px;font-weight:600;color:#555;font-size:.9rem}
select{width:100%;padding:10px;border-radius:8px;border:2px solid #ffcc80;font-family:inherit;font-size:1rem;outline:none;transition:all .3s;background:#fff}
select:focus{border-color:var(--accent);box-shadow:0 0 8px rgba(255,111,0,.2)}
.btn-calculate{width:100%;padding:15px;background:linear-gradient(to right,var(--primary),var(--accent));color:#fff;border:none;border-radius:10px;font-size:1.2rem;font-weight:700;cursor:pointer;transition:transform .2s,box-shadow .2s;margin-bottom:25px;box-shadow:0 4px 15px rgba(216,67,21,.3)}
.btn-calculate:active{transform:scale(.98)}
.result-card{display:none;background:#fff;border-radius:15px;overflow:hidden;border:1px solid #eee;animation:fadeIn .5s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.score-header{background:linear-gradient(45deg,var(--primary),var(--accent));color:#fff;padding:20px;text-align:center}
.score-circle{width:80px;height:80px;background:#fff;color:var(--primary);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.8rem;font-weight:700;margin:0 auto 10px;box-shadow:0 4px 10px rgba(0,0,0,.2)}
.compatibility-level{font-weight:700;font-size:1.2rem;margin-top:10px;padding:5px 15px;border-radius:20px;background:rgba(255,255,255,.2);display:inline-block}
.details-grid{display:grid;grid-template-columns:1fr 1fr;gap:1px;background:#eee}
.detail-item{background:#fff;padding:15px;text-align:center}
.detail-label{font-size:.85rem;color:#777;margin-bottom:5px}
.detail-val{font-weight:600;color:#333}
.dosha-box{background:#fff5f5;padding:15px;text-align:center;border-top:1px solid #fee2e2}
.dosha-title{color:var(--danger);font-weight:700;margin-bottom:5px}
.excellent{color:var(--success)}.good{color:#43a047}.average{color:var(--warning)}.poor{color:var(--danger)}
@media(max-width:600px){.input-grid{grid-template-columns:1fr}.container{padding:15px}}
</style>
</head>
<body>

<div class="container">
    <h1>‡•ê ‡§ó‡•Å‡§£ ‡§Æ‡§ø‡§≤‡§æ‡§® ‡•ê</h1>
    
    <div class="input-grid">
        <div class="input-group">
            <h3>‚ôÇ ‡§Æ‡•Å‡§≤‡§ó‡§æ</h3>
            <label>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</label>
            <select id="boyNakshatraSelect"></select>
            <label style="margin-top:10px">‡§ö‡§∞‡§£</label>
            <select id="boyCharanSelect">
                <option value="1">‡•ß</option><option value="2">‡•®</option>
                <option value="3">‡•©</option><option value="4">‡•™</option>
            </select>
        </div>

        <div class="input-group">
            <h3>‚ôÄ ‡§Æ‡•Å‡§≤‡§ó‡•Ä</h3>
            <label>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</label>
            <select id="girlNakshatraSelect"></select>
            <label style="margin-top:10px">‡§ö‡§∞‡§£</label>
            <select id="girlCharanSelect">
                <option value="1">‡•ß</option><option value="2">‡•®</option>
                <option value="3">‡•©</option><option value="4">‡•™</option>
            </select>
        </div>
    </div>

    <button class="btn-calculate" onclick="calculate()">‡§ó‡•Å‡§£ ‡§§‡§™‡§æ‡§∏‡§æ</button>

    <div id="resultCard" class="result-card">
        <div class="score-header">
            <div class="score-circle" id="scoreNum">0</div>
            <div>‡§è‡§ï‡•Ç‡§£ ‡§ó‡•Å‡§£ (‡•©‡•¨ ‡§™‡•à‡§ï‡•Ä)</div>
            <div id="compatLevel" class="compatibility-level"></div>
        </div>

        <div class="details-grid">
            <div class="detail-item">
                <div class="detail-label">‡§Æ‡•Å‡§≤‡§æ‡§ö‡•á ‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</div>
                <div class="detail-val"><span id="boyNakshatra"></span> (<span id="boyCharan"></span>)</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">‡§Æ‡•Å‡§≤‡•Ä‡§ö‡•á ‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</div>
                <div class="detail-val"><span id="girlNakshatra"></span> (<span id="girlCharan"></span>)</div>
            </div>
            <div class="detail-item"><div class="detail-label">‡§Æ‡•Å‡§≤‡§æ‡§ö‡•Ä ‡§∞‡§æ‡§∏</div><div class="detail-val" id="boyRashiDetail"></div></div>
            <div class="detail-item"><div class="detail-label">‡§Æ‡•Å‡§≤‡•Ä‡§ö‡•Ä ‡§∞‡§æ‡§∏</div><div class="detail-val" id="girlRashiDetail"></div></div>
            <div class="detail-item"><div class="detail-label">‡§ó‡§£</div><div class="detail-val">‚ôÇ <span id="boyGan"></span> | ‚ôÄ <span id="girlGan"></span></div></div>
            <div class="detail-item"><div class="detail-label">‡§®‡§æ‡§°‡•Ä</div><div class="detail-val">‚ôÇ <span id="boyNadi"></span> | ‚ôÄ <span id="girlNadi"></span></div></div>
            <div class="detail-item"><div class="detail-label">‡§Ø‡•ã‡§®‡•Ä</div><div class="detail-val">‚ôÇ <span id="boyYoni"></span> | ‚ôÄ <span id="girlYoni"></span></div></div>
            <div class="detail-item"><div class="detail-label">‡§µ‡§∞‡•ç‡§ó</div><div class="detail-val">‚ôÇ <span id="boyVarg"></span> | ‚ôÄ <span id="girlVarg"></span></div></div>
        </div>

        <div class="dosha-box">
            <div class="dosha-title">‡§¶‡•ã‡§∑ / ‡§ü‡§ø‡§™‡§£‡•Ä</div>
            <div id="doshaText">-</div>
        </div>
    </div>
</div>

<script>
let nakshatraData = {};
let gunData = {};

// 1. Load data
async function init() {
    try {
        // Replace these URLs with your actual raw GitHub links if needed
        const [nakRes, gunRes] = await Promise.all([
            fetch('nakshatra_details.json'), 
            fetch('gunmilan_data (5).json')
        ]);
        nakshatraData = await nakRes.json();
        gunData = await gunRes.json();
        
        populateSelects();
    } catch (e) {
        console.error("Error loading JSON:", e);
        alert("‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§§ ‡§Ö‡§°‡§ö‡§£ ‡§Ü‡§≤‡•Ä.");
    }
}

function populateSelects() {
    const bSel = document.getElementById('boyNakshatraSelect');
    const gSel = document.getElementById('girlNakshatraSelect');
    Object.keys(nakshatraData).forEach(n => {
        bSel.add(new Option(n, n));
        gSel.add(new Option(n, n));
    });
}

function getRashi(nak, charan) {
    const char = parseInt(charan);
    const d = nakshatraData[nak];
    if (!d || !d.‡§∞‡§æ‡§∂‡•Ä_‡§ö‡§∞‡§£) return "-";
    for (let r in d.‡§∞‡§æ‡§∂‡•Ä_‡§ö‡§∞‡§£) {
        if (d.‡§∞‡§æ‡§∂‡•Ä_‡§ö‡§∞‡§£[r].includes(char)) return r;
    }
    return "-";
}

function calculate() {
    const bNak = document.getElementById('boyNakshatraSelect').value;
    const bChar = document.getElementById('boyCharanSelect').value;
    const gNak = document.getElementById('girlNakshatraSelect').value;
    const gChar = document.getElementById('girlCharanSelect').value;

    const bDetails = nakshatraData[bNak];
    const gDetails = nakshatraData[gNak];
    const bR = getRashi(bNak, bChar);
    const gR = getRashi(gNak, gChar);

    // Update UI Details
    document.getElementById('boyNakshatra').textContent = bNak;
    document.getElementById('boyCharan').textContent = bChar;
    document.getElementById('boyNadi').textContent = bDetails.‡§®‡§æ‡§°‡•Ä;
    document.getElementById('boyYoni').textContent = bDetails.‡§Ø‡•ã‡§®‡•Ä;
    document.getElementById('boyGan').textContent = bDetails.‡§ó‡§£;
    document.getElementById('boyRashiDetail').textContent = bR;
    document.getElementById('boyVarg').textContent = bDetails.‡§µ‡§∞‡•ç‡§ó;

    document.getElementById('girlNakshatra').textContent = gNak;
    document.getElementById('girlCharan').textContent = gChar;
    document.getElementById('girlNadi').textContent = gDetails.‡§®‡§æ‡§°‡•Ä;
    document.getElementById('girlYoni').textContent = gDetails.‡§Ø‡•ã‡§®‡•Ä;
    document.getElementById('girlGan').textContent = gDetails.‡§ó‡§£;
    document.getElementById('girlRashiDetail').textContent = gR;
    document.getElementById('girlVarg').textContent = gDetails.‡§µ‡§∞‡•ç‡§ó;

    // --- NEW LOGIC FOR JSON 5 ---
    let res = null;

    // Iterate through keys to find a range match
    for (let fullKey in gunData) {
        const [boyPart, girlPart] = fullKey.split('_');
        
        // Split Nakshatra from Charan Range (e.g., "‡§Ö‡§∂‡•ç‡§µ‡§ø‡§®‡•Ä" and "1,2,3,4")
        const [bN, bRange] = boyPart.split('-');
        const [gN, gRange] = girlPart.split('-');

        // Check if Nakshatra names match AND the selected charan is in the comma list
        const boyMatch = (bN === bNak && bRange.split(',').includes(bChar));
        const girlMatch = (gN === gNak && gRange.split(',').includes(gChar));

        if (boyMatch && girlMatch) {
            res = gunData[fullKey];
            break;
        }
    }

    if (res) {
        const score = res.score;
        const dosha = res.dosha || "‡§¶‡•ã‡§∑ ‡§®‡§æ‡§π‡•Ä";

        document.getElementById('scoreNum').textContent = score;
        document.getElementById('doshaText').textContent = dosha;

        let lvl = "", cls = "";
        if (score >= 28) { lvl = "‡§â‡§§‡•ç‡§§‡§Æ ‡§ú‡•ã‡§°‡•Ä ‚ú®"; cls = "excellent" }
        else if (score >= 24) { lvl = "‡§Ö‡§§‡§ø‡§∂‡§Ø ‡§ö‡§æ‡§Ç‡§ó‡§≤‡•Ä ‡§ú‡•ã‡§°‡•Ä üíö"; cls = "excellent" }
        else if (score >= 18) { lvl = "‡§ö‡§æ‡§Ç‡§ó‡§≤‡•Ä ‡§ú‡•ã‡§°‡•Ä üëç"; cls = "good" }
        else if (score >= 12) { lvl = "‡§∏‡§∞‡§æ‡§∏‡§∞‡•Ä ‡§ú‡•ã‡§°‡•Ä ‚ö†Ô∏è"; cls = "average" }
        else { lvl = "‡§ú‡•ã‡§°‡•Ä ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§®‡§æ‡§π‡•Ä ‚ùå"; cls = "poor" }

        const compatLevel = document.getElementById('compatLevel');
        compatLevel.textContent = lvl;
        compatLevel.className = "compatibility-level " + cls;
        document.getElementById('scoreNum').className = "score-circle " + cls;

        document.getElementById('resultCard').style.display = 'block';
        window.scrollTo({ top: document.getElementById('resultCard').offsetTop - 20, behavior: 'smooth' });
    } else {
        alert("‡§π‡•ç‡§Ø‡§æ ‡§ú‡•ã‡§°‡•Ä‡§ö‡§æ ‡§°‡•á‡§ü‡§æ ‡§∏‡§æ‡§™‡§°‡§≤‡§æ ‡§®‡§æ‡§π‡•Ä.");
    }
}

init();
</script>
</body>
</html>
